---
title: ç¬¬6å¤©ä¸‹åˆ_å·¥ä½œæµè®¾è®¡å®ç°
author: å‘¨å­åŠ›
icon: iconfont icon-a-outline-harmony-one
tag: [PythonåŸºç¡€]
category: æ•™å­¦æ–‡æ¡£
order: 11
---

## ğŸ“… ä¸‹åˆï¼ˆ14:00-18:00ï¼‰

### ğŸ”¹ 14:00-15:30ï½œå®ä¾‹2ï¼šä¸­ç­‰å¤æ‚åº¦å®æˆ˜

#### ğŸ¯ åœºæ™¯ï¼šå­¦ç”Ÿè¯·å‡å®¡æ‰¹å·¥ä½œæµ

```
ä¸šåŠ¡éœ€æ±‚ï¼š
å­¦ç”Ÿæäº¤è¯·å‡ç”³è¯· â†’ ç³»ç»Ÿæ ¡éªŒ â†’ æŒ‰å¤©æ•°è·¯ç”±å®¡æ‰¹ â†’ é€šçŸ¥ç»“æœ â†’ è®°å½•å½’æ¡£

ğŸ“‹ å·¥ä½œæµæ¶æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ StartèŠ‚ç‚¹                           â”‚
â”‚ è¾“å…¥ï¼šuser_id, leave_type, dates, reasonâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CodeèŠ‚ç‚¹ï¼šæ—¥æœŸæ ¡éªŒ+å¤©æ•°è®¡ç®—         â”‚
â”‚ â€¢ æ ¡éªŒï¼šå¼€å§‹æ—¥æœŸâ‰¥ä»Šå¤©ï¼Œç»“æŸâ‰¥å¼€å§‹    â”‚
â”‚ â€¢ è®¡ç®—ï¼šdays = (end-start).days+1  â”‚
â”‚ â€¢ è¾“å‡ºï¼švalid, days, error         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ConditionèŠ‚ç‚¹ï¼šè·¯ç”±å®¡æ‰¹çº§åˆ«         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åˆ†æ”¯Aï¼šdaysâ‰¤3 â†’ è¾…å¯¼å‘˜å®¡æ‰¹         â”‚
â”‚ åˆ†æ”¯Bï¼š3<daysâ‰¤7 â†’ é™¢ç³»å®¡æ‰¹         â”‚
â”‚ åˆ†æ”¯Cï¼šdays>7 â†’ é™¢ç³»+è¡¥å……ææ–™      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ†æ”¯å†…å­æµç¨‹ï¼ˆä»¥åˆ†æ”¯Bä¸ºä¾‹ï¼‰         â”‚
â”‚ 1. KnowledgeèŠ‚ç‚¹ï¼šæŸ¥è¯·å‡æ”¿ç­–        â”‚
â”‚ 2. DatabaseèŠ‚ç‚¹ï¼šæ’å…¥ç”³è¯·è®°å½•       â”‚
â”‚ 3. PluginèŠ‚ç‚¹ï¼šå‘é€é€šçŸ¥ç»™è¾…å¯¼å‘˜    â”‚
â”‚ 4. VariableèŠ‚ç‚¹ï¼šæ›´æ–°å®¡æ‰¹é“¾         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MergeèŠ‚ç‚¹ï¼šèšåˆå„åˆ†æ”¯ç»“æœ           â”‚
â”‚ â€¢ ç»Ÿä¸€è¾“å‡ºæ ¼å¼                      â”‚
â”‚ â€¢ è®°å½•å®¡æ‰¹çº§åˆ«/ä¸‹ä¸€æ­¥/æ”¿ç­–å‚è€ƒ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EndèŠ‚ç‚¹ï¼šè¿”å›ç”³è¯·ç»“æœ               â”‚
â”‚ {                                  â”‚
â”‚   "success": true,                 â”‚
â”‚   "application_id": "APP20260221001",â”‚
â”‚   "approval_level": "é™¢ç³»",         â”‚
â”‚   "next_step": "ç­‰å¾…å¼ è€å¸ˆå®¡æ ¸",    â”‚
â”‚   "policy": "ç—…å‡éœ€æä¾›åŒ»é™¢è¯æ˜..." â”‚
â”‚ }                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ”§ å…³é”®é…ç½®è¯¦è§£

```
1ï¸âƒ£ æ—¥æœŸæ ¡éªŒä»£ç èŠ‚ç‚¹ï¼ˆPythonï¼‰ï¼š
```python
def main(start_date, end_date):
    from datetime import datetime, timedelta
    
    try:
        d1 = datetime.strptime(start_date, "%Y-%m-%d").date()
        d2 = datetime.strptime(end_date, "%Y-%m-%d").date()
        today = datetime.now().date()
        
        # æ ¡éªŒè§„åˆ™
        if d1 < today:
            return {"valid": False, "error": "å¼€å§‹æ—¥æœŸä¸èƒ½æ—©äºä»Šå¤©"}
        if d2 < d1:
            return {"valid": False, "error": "ç»“æŸæ—¥æœŸä¸èƒ½æ—©äºå¼€å§‹æ—¥æœŸ"}
        if (d2-d1).days > 30:
            return {"valid": False, "error": "å•æ¬¡è¯·å‡ä¸è¶…è¿‡30å¤©"}
        
        days = (d2 - d1).days + 1
        return {"valid": True, "days": days}
    except Exception as e:
        return {"valid": False, "error": f"æ—¥æœŸæ ¼å¼é”™è¯¯ï¼š{str(e)}"}
```

2ï¸âƒ£ æ¡ä»¶åˆ†æ”¯è¡¨è¾¾å¼ï¼š
```
åˆ†æ”¯Aï¼ˆè¾…å¯¼å‘˜ï¼‰ï¼š{{calc.output.days}} <= 3
åˆ†æ”¯Bï¼ˆé™¢ç³»ï¼‰ï¼š{{calc.output.days}} > 3 AND {{calc.output.days}} <= 7
åˆ†æ”¯Cï¼ˆé™¢ç³»+ææ–™ï¼‰ï¼š{{calc.output.days}} > 7
```

3ï¸âƒ£ é€šçŸ¥æ’ä»¶é…ç½®ï¼ˆä¼ä¸šå¾®ä¿¡ï¼‰ï¼š
```
â€¢ æ¥æ”¶äººï¼š{{approver_map[{{workflow.approval_level}}]}}
â€¢ æ¶ˆæ¯æ¨¡æ¿ï¼š
  "ğŸ“‹ æ–°è¯·å‡ç”³è¯·
   ç”³è¯·äººï¼š{{start.user_id}}
   ç±»å‹ï¼š{{start.leave_type}}ï¼Œ{{calc.output.days}}å¤©
   åŸå› ï¼š{{start.reason}}
   ğŸ‘‰ ç‚¹å‡»å®¡æ ¸ï¼š[é“¾æ¥]"
â€¢ å‘é€ç»“æœï¼šè®°å½•åˆ°workflow.notification_sent
```

4ï¸âƒ£ æ•°æ®åº“æ’å…¥SQLï¼š
```sql
INSERT INTO leave_applications (
  app_id, user_id, leave_type, start_date, end_date,
  days, reason, approval_level, status, created_at
) VALUES (
  CONCAT('APP', DATE_FORMAT(NOW(),'%Y%m%d'), LPAD({{db_counter.output.next_val}},3,'0')),
  {{start.user_id}}, {{start.leave_type}}, {{start.start_date}}, {{start.end_date}},
  {{calc.output.days}}, {{start.reason}}, {{workflow.approval_level}},
  'pending', NOW()
)
```

#### ğŸ§ª æµ‹è¯•ç”¨ä¾‹è®¾è®¡

```
ã€æ­£å¸¸æµç¨‹ã€‘
è¾“å…¥ï¼šäº‹å‡ï¼Œ2026-03-01~2026-03-03ï¼Œ"å‚åŠ äº²æˆšå©šç¤¼"
é¢„æœŸï¼šdays=3 â†’ åˆ†æ”¯A â†’ è¾…å¯¼å‘˜å®¡æ‰¹ â†’ è¿”å›ç”³è¯·ID

ã€è¾¹ç•Œæµ‹è¯•ã€‘
è¾“å…¥ï¼šç—…å‡ï¼Œ2026-02-20~2026-02-20ï¼ˆæ—©äºä»Šå¤©ï¼‰
é¢„æœŸï¼šæ ¡éªŒå¤±è´¥ â†’ è¿”å›"å¼€å§‹æ—¥æœŸä¸èƒ½æ—©äºä»Šå¤©"

ã€é•¿è¯·å‡æµ‹è¯•ã€‘
è¾“å…¥ï¼šå¹´å‡ï¼Œ2026-04-01~2026-04-15ï¼ˆ15å¤©ï¼‰
é¢„æœŸï¼šdays=15 â†’ åˆ†æ”¯C â†’ è¦æ±‚è¡¥å……ææ–™ + é™¢ç³»å®¡æ‰¹

ã€å¼‚å¸¸è¾“å…¥ã€‘
è¾“å…¥ï¼šleave_type="æ—…æ¸¸å‡"ï¼ˆä¸åœ¨æšä¸¾ä¸­ï¼‰
é¢„æœŸï¼šStartèŠ‚ç‚¹æ ¡éªŒå¤±è´¥ï¼Œæå‰è¿”å›é”™è¯¯
```

> ğŸ’¡ **è®¾è®¡åŸåˆ™**ï¼šä¸­ç­‰å¤æ‚åº¦å·¥ä½œæµçš„æ ¸å¿ƒæ˜¯"åˆ†æ”¯ç®¡ç†"ã€‚ç¡®ä¿æ¯ä¸ªåˆ†æ”¯æœ‰æ˜ç¡®çš„å…¥å£/å‡ºå£ï¼Œé¿å…é€»è¾‘å­¤å²›ï¼›ç”¨VariableèŠ‚ç‚¹ç»Ÿä¸€ç®¡ç†çŠ¶æ€ï¼Œé™ä½è€¦åˆ[[3]]ã€‚

---

### ğŸ”¹ 15:30-16:45ï½œå®ä¾‹3ï¼šé«˜çº§åº”ç”¨+è°ƒè¯•æŠ€å·§

#### ğŸ¯ åœºæ™¯ï¼šæ™ºèƒ½å®¢æœå·¥å•å¤„ç†ç³»ç»Ÿ

```
ä¸šåŠ¡éœ€æ±‚ï¼š
ç”¨æˆ·åé¦ˆé—®é¢˜ â†’ è‡ªåŠ¨åˆ†ç±» â†’ ä¼˜å…ˆçº§åˆ¤å®š â†’ åˆ†é…å¤„ç†äºº â†’ è·Ÿè¸ªçŠ¶æ€ â†’ æ»¡æ„åº¦å›è®¿

ğŸ“‹ é«˜çº§ç‰¹æ€§åº”ç”¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”¹ åŠ¨æ€è·¯ç”±ï¼šåŸºäºNLPåˆ†ç±»ç»“æœåˆ†é…    â”‚
â”‚ â€¢ CodeèŠ‚ç‚¹è°ƒç”¨ç®€æ˜“æ–‡æœ¬åˆ†ç±»æ¨¡å‹      â”‚
â”‚ â€¢ è¾“å‡ºï¼šcategoryâˆˆ["æŠ€æœ¯","è´¦åŠ¡","æœåŠ¡"]â”‚
â”‚ â€¢ ConditionèŠ‚ç‚¹è·¯ç”±åˆ°å¯¹åº”å¤„ç†é˜Ÿåˆ—  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”¹ å¾ªç¯å¤„ç†ï¼šæ‰¹é‡å…³è”å†å²å·¥å•       â”‚
â”‚ â€¢ LoopèŠ‚ç‚¹éå†ç”¨æˆ·å†å²å·¥å•åˆ—è¡¨      â”‚
â”‚ â€¢ æ£€æŸ¥æ˜¯å¦æœ‰ç›¸ä¼¼é—®é¢˜/æœªå…³é—­å·¥å•    â”‚
â”‚ â€¢ ç´¯ç§¯åˆ°workflow.related_tickets   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”¹ é”™è¯¯å¤„ç†ï¼šæ’ä»¶å¤±è´¥é™çº§ç­–ç•¥       â”‚
â”‚ â€¢ æ¯ä¸ªPluginèŠ‚ç‚¹é…ç½®timeout+retry  â”‚
â”‚ â€¢ å¤±è´¥æ—¶ï¼šè®°å½•æ—¥å¿— + ä½¿ç”¨å¤‡ç”¨æ•°æ®æºâ”‚
â”‚ â€¢ æœ€ç»ˆæ— æ³•è§£å†³ï¼šè½¬äººå·¥+è®°å½•åŸå›     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”¹ çŠ¶æ€æœºï¼šå·¥å•ç”Ÿå‘½å‘¨æœŸç®¡ç†         â”‚
â”‚ â€¢ Variableç®¡ç†ï¼šstatusâˆˆ[new,assigned,processing,resolved]â”‚
â”‚ â€¢ æ¯ä¸ªçŠ¶æ€å˜æ›´è§¦å‘ä¸åŒå­æµç¨‹       â”‚
â”‚ â€¢ æ”¯æŒ"åŠ æ€¥""è½¬æ´¾""å…³é—­"ç­‰æ“ä½œ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ”§ è°ƒè¯•æŠ€å·§ä¸æœ€ä½³å®è·µ

```
ğŸ› ï¸ è°ƒè¯•å››æ­¥æ³•ï¼š

1ï¸âƒ£ æ—¥å¿—è¿½è¸ªï¼ˆLogèŠ‚ç‚¹ï¼‰
â€¢ åœ¨å…³é”®èŠ‚ç‚¹åæ·»åŠ Logï¼Œè¾“å‡ºå˜é‡å€¼
â€¢ ç¤ºä¾‹ï¼š`Log: "After calc, days={{calc.output.days}}, valid={{calc.output.valid}}"`
â€¢ æ‰§è¡Œæ—¶æŸ¥çœ‹"æ‰§è¡Œæ—¥å¿—"é¢æ¿ï¼Œå®šä½é—®é¢˜èŠ‚ç‚¹

2ï¸âƒ£ å•æ­¥è°ƒè¯•ï¼ˆStep-by-Stepï¼‰
â€¢ Cozeæ”¯æŒ"æš‚åœæ‰§è¡Œ"ï¼Œé€èŠ‚ç‚¹æŸ¥çœ‹è¾“å…¥è¾“å‡º
â€¢ é€‚åˆï¼šæ’æŸ¥æ•°æ®ä¼ é€’é”™è¯¯/æ¡ä»¶åˆ¤æ–­å¼‚å¸¸

3ï¸âƒ£ Mockæµ‹è¯•ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
â€¢ ä¸ºæ’ä»¶èŠ‚ç‚¹é…ç½®"æµ‹è¯•å“åº”"ï¼Œé¿å…ä¾èµ–å¤–éƒ¨æœåŠ¡
â€¢ ç¤ºä¾‹ï¼šå¤©æ°”æ’ä»¶Mockè¿”å› `{"temp":25, "condition":"æ™´"}`
â€¢ ä¼˜åŠ¿ï¼šå¿«é€ŸéªŒè¯é€»è¾‘ï¼Œä¸å—ç½‘ç»œ/é…é¢é™åˆ¶

4ï¸âƒ£ A/Bæµ‹è¯•ï¼ˆç­–ç•¥å¯¹æ¯”ï¼‰
â€¢ å¤åˆ¶å·¥ä½œæµï¼Œä¿®æ”¹æŸèŠ‚ç‚¹é…ç½®ï¼ˆå¦‚æ¡ä»¶é˜ˆå€¼ï¼‰
â€¢ ç”¨ç›¸åŒè¾“å…¥æµ‹è¯•ï¼Œå¯¹æ¯”è¾“å‡ºå·®å¼‚
â€¢ é€‚åˆï¼šä¼˜åŒ–è·¯ç”±ç­–ç•¥/æ¨èç®—æ³•

âš¡ æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼š

âœ… å¹¶è¡Œæ‰§è¡Œï¼šæ— ä¾èµ–çš„èŠ‚ç‚¹ç”¨å¹¶è¡Œåˆ†æ”¯ï¼Œå‡å°‘æ€»è€—æ—¶
âœ… æ‡’åŠ è½½ï¼šéå¿…éœ€æ•°æ®ï¼ˆå¦‚å†å²å·¥å•ï¼‰æŒ‰éœ€æŸ¥è¯¢ï¼Œéå¯åŠ¨å³æŸ¥
âœ… ç»“æœç¼“å­˜ï¼šCodeèŠ‚ç‚¹ä¸­ç¼“å­˜é‡å¤è®¡ç®—ç»“æœï¼ˆå¦‚æ—¥æœŸè§£æï¼‰
âœ… åˆ†é¡µå¤„ç†ï¼šå¤§æ•°æ®é‡ç”¨åˆ†é¡µ+Loopï¼Œé¿å…å•æ¬¡è¶…æ—¶

ğŸ” å®‰å…¨ä¸åˆè§„ï¼š

â€¢ æ•æ„Ÿæ•°æ®è„±æ•ï¼šLogèŠ‚ç‚¹ä¸­ä¸è¾“å‡ºæ‰‹æœºå·/èº«ä»½è¯
â€¢ æƒé™æ ¡éªŒï¼šDatabaseæ“ä½œå‰éªŒè¯user_idåŒ¹é…
â€¢ æ“ä½œå®¡è®¡ï¼šå…³é”®å˜æ›´ï¼ˆå¦‚åˆ é™¤å·¥å•ï¼‰è®°å½•æ“ä½œäºº+æ—¶é—´
â€¢ ç”¨æˆ·æˆæƒï¼šæ¶‰åŠå¤–éƒ¨é€šçŸ¥ï¼ˆçŸ­ä¿¡/é‚®ä»¶ï¼‰éœ€ç”¨æˆ·ç¡®è®¤
```

#### ğŸ§ª é«˜çº§åœºæ™¯æµ‹è¯•

```
ã€åŠ¨æ€åˆ†ç±»æµ‹è¯•ã€‘
è¾“å…¥ï¼š"æˆ‘çš„æ ¡å›­å¡åˆ·ä¸äº†é£Ÿå ‚"
é¢„æœŸï¼šCodeèŠ‚ç‚¹åˆ†ç±»ä¸º"æŠ€æœ¯" â†’ è·¯ç”±åˆ°æŠ€æœ¯é˜Ÿåˆ— â†’ åˆ†é…ç»™ITæ”¯æŒ

ã€å¾ªç¯å…³è”æµ‹è¯•ã€‘
ç”¨æˆ·æœ‰3æ¡å†å²å·¥å•ï¼Œå…¶ä¸­1æ¡æœªå…³é—­ä¸”ç›¸ä¼¼
é¢„æœŸï¼šLoopèŠ‚ç‚¹è¯†åˆ«å…³è”å·¥å• â†’ åœ¨å›å¤ä¸­æç¤º"æ‚¨æœ‰æœªå®Œæˆçš„ç›¸ä¼¼å·¥å•#12345"

ã€é™çº§ç­–ç•¥æµ‹è¯•ã€‘
æ¨¡æ‹Ÿä¼ä¸šå¾®ä¿¡æ’ä»¶è¶…æ—¶ï¼ˆè®¾ç½®timeout=1sï¼‰
é¢„æœŸï¼šæ•è·å¼‚å¸¸ â†’ è®°å½•æ—¥å¿— â†’ è¿”å›"é€šçŸ¥å·²è®°å½•ï¼Œå°†äººå·¥è·Ÿè¿›" â†’ å·¥ä½œæµä¸ä¸­æ–­

ã€çŠ¶æ€æœºæµ‹è¯•ã€‘
å·¥å•çŠ¶æ€ä»"new"â†’"assigned"â†’"processing"
é¢„æœŸï¼šæ¯æ¬¡å˜æ›´è§¦å‘å¯¹åº”é€šçŸ¥/è®¡æ—¶/æƒé™æ ¡éªŒ
```

> ğŸ’¡ **è¿›é˜¶è®¤çŸ¥**ï¼šé«˜çº§å·¥ä½œæµçš„æœ¬è´¨æ˜¯"çŠ¶æ€ç®¡ç†"ã€‚ç”¨VariableèŠ‚ç‚¹ä½œä¸ºçŠ¶æ€å¯„å­˜å™¨ï¼Œç”¨ConditionèŠ‚ç‚¹ä½œä¸ºçŠ¶æ€è½¬ç§»å¼•æ“ï¼Œç”¨CodeèŠ‚ç‚¹å¤„ç†çŠ¶æ€è½¬æ¢é€»è¾‘ï¼Œå³å¯æ„å»ºå¤æ‚çš„ä¸šåŠ¡ç³»ç»Ÿ[[4]]ã€‚

---

### ğŸ”¹ 16:45-18:00ï½œç»¼åˆæ¼”ç»ƒä¸ç­”ç–‘

#### ğŸ¯ ç»¼åˆæ¼”ç»ƒï¼šç‹¬ç«‹è®¾è®¡ä¸€ä¸ªå·¥ä½œæµ

```
ğŸ“‹ ä»»åŠ¡è¦æ±‚ï¼ˆ30åˆ†é’Ÿï¼‰ï¼š
è®¾è®¡ä¸€ä¸ª"æ ¡å›­æ´»åŠ¨æŠ¥å"å·¥ä½œæµï¼Œæ»¡è¶³ï¼š
1. ç”¨æˆ·è¾“å…¥ï¼šæ´»åŠ¨ID+ç”¨æˆ·ID
2. æ ¡éªŒï¼šæ´»åŠ¨æ˜¯å¦å¼€æ”¾æŠ¥åã€ç”¨æˆ·æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼ˆå¦‚å¹´çº§/ä¸“ä¸šï¼‰
3. åé¢ç®¡ç†ï¼šå‰©ä½™åé¢-1ï¼Œé˜²æ­¢è¶…æŠ¥
4. è®°å½•ï¼šå†™å…¥æŠ¥åæ•°æ®åº“ï¼Œç”ŸæˆæŠ¥åå‡­è¯
5. é€šçŸ¥ï¼šå‘é€ç¡®è®¤æ¶ˆæ¯+æ—¥å†é‚€è¯·
6. å¼‚å¸¸ï¼šåé¢å·²æ»¡/æ¡ä»¶ä¸ç¬¦æ—¶å‹å¥½æç¤º

ğŸ åŠ åˆ†é¡¹ï¼š
â€¢ æ”¯æŒ"å€™è¡¥æŠ¥å"ï¼ˆåé¢æ»¡æ—¶åŠ å…¥ç­‰å¾…é˜Ÿåˆ—ï¼‰
â€¢ æ´»åŠ¨å¼€å§‹å‰24hè‡ªåŠ¨æé†’
â€¢ æŠ¥ååå¯"å–æ¶ˆæŠ¥å"ï¼Œé‡Šæ”¾åé¢

ğŸ“Š è¯„å®¡ç»´åº¦ï¼š
â€¢ é€»è¾‘å®Œæ•´æ€§ï¼šæ˜¯å¦è¦†ç›–æ­£å¸¸/å¼‚å¸¸æµç¨‹
â€¢ èŠ‚ç‚¹åˆç†æ€§ï¼šæ˜¯å¦é€‰ç”¨åˆé€‚èŠ‚ç‚¹ç±»å‹
â€¢ å¯ç»´æŠ¤æ€§ï¼šå˜é‡å‘½å/æ³¨é‡Š/æ¨¡å—åŒ–ç¨‹åº¦
â€¢ ç”¨æˆ·ä½“éªŒï¼šè¾“å‡ºæ˜¯å¦æ¸…æ™°ï¼Œé”™è¯¯æ˜¯å¦å‹å¥½
```

#### ğŸ” å¸¸è§é—®é¢˜ç­”ç–‘ï¼ˆQ&Aç²¾é€‰ï¼‰

```
Q1ï¼šå·¥ä½œæµæ‰§è¡Œè¶…æ—¶æ€ä¹ˆåŠï¼Ÿ
Aï¼šâ€¢ æ£€æŸ¥æ˜¯å¦æœ‰æ­»å¾ªç¯/æ— é™é€’å½’
   â€¢ ä¼˜åŒ–å¹¶è¡Œåˆ†æ”¯ï¼Œå‡å°‘ä¸²è¡Œä¾èµ–
   â€¢ å¯¹è€—æ—¶æ’ä»¶è®¾ç½®åˆç†timeout+fallback
   â€¢ å¤æ‚é€»è¾‘æ‹†åˆ†ä¸ºå­å·¥ä½œæµï¼ŒæŒ‰éœ€è°ƒç”¨

Q2ï¼šå¦‚ä½•è°ƒè¯•å˜é‡ä¼ é€’é”™è¯¯ï¼Ÿ
Aï¼šâ€¢ åœ¨å…³é”®èŠ‚ç‚¹åæ·»åŠ LogèŠ‚ç‚¹ï¼Œæ‰“å°å˜é‡å€¼
   â€¢ ä½¿ç”¨Cozeçš„"æ‰§è¡Œè¿½è¸ª"åŠŸèƒ½ï¼Œå¯è§†åŒ–æ•°æ®æµ
   â€¢ æ£€æŸ¥å˜é‡åæ‹¼å†™ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
   â€¢ ç¡®è®¤ä¸Šæ¸¸èŠ‚ç‚¹æ˜¯å¦æˆåŠŸæ‰§è¡Œï¼ˆstatus!=errorï¼‰

Q3ï¼šå·¥ä½œæµèƒ½è°ƒç”¨å¦ä¸€ä¸ªå·¥ä½œæµå—ï¼Ÿ
Aï¼šâœ… æ”¯æŒï¼ç”¨"Sub-Workflow"èŠ‚ç‚¹
   â€¢ é€‚ç”¨åœºæ™¯ï¼šå¤ç”¨é€šç”¨é€»è¾‘ï¼ˆå¦‚"èº«ä»½éªŒè¯"ï¼‰
   â€¢ é…ç½®ï¼šæŒ‡å®šå­å·¥ä½œæµID + è¾“å…¥å‚æ•°æ˜ å°„
   â€¢ æ³¨æ„ï¼šé¿å…å¾ªç¯è°ƒç”¨ï¼ˆAè°ƒBï¼ŒBåˆè°ƒAï¼‰

Q4ï¼šå¦‚ä½•ç®¡ç†å·¥ä½œæµç‰ˆæœ¬ï¼Ÿ
Aï¼šâ€¢ Cozeæ”¯æŒå·¥ä½œæµ"ä¿å­˜ä¸ºæ–°ç‰ˆæœ¬"
   â€¢ å»ºè®®ï¼šå¤§æ”¹å‰å¤åˆ¶å¤‡ä»½ï¼Œå°è°ƒç”¨"å¦å­˜ä¸ºv1.1"
   â€¢ å‘å¸ƒæ—¶æ ‡æ³¨å˜æ›´æ—¥å¿—ï¼ˆChangelogï¼‰
   â€¢ ä¿ç•™1-2ä¸ªå†å²ç‰ˆæœ¬ï¼Œä¾¿äºå›æ»š

Q5ï¼šå·¥ä½œæµèƒ½å®šæ—¶è‡ªåŠ¨æ‰§è¡Œå—ï¼Ÿ
Aï¼šâœ… æ”¯æŒï¼ç”¨"Trigger"é…ç½®
   â€¢ å®šæ—¶è§¦å‘ï¼šcronè¡¨è¾¾å¼ï¼ˆå¦‚"0 8 * * *"è¡¨ç¤ºæ¯å¤©8ç‚¹ï¼‰
   â€¢ äº‹ä»¶è§¦å‘ï¼šæ•°æ®åº“å˜æ›´/æ’ä»¶å›è°ƒ/HTTP webhook
   â€¢ é€‚ç”¨åœºæ™¯ï¼šæ—¥æŠ¥ç”Ÿæˆ/åé¢é‡Šæ”¾/æ•°æ®åŒæ­¥
```

#### ğŸ“‹ åŸ¹è®­æˆæœæ£€æŸ¥æ¸…å•

```
âœ… èƒ½åŠ›è¾¾æˆï¼š
â–¡ ç†è§£å·¥ä½œæµæ ¸å¿ƒæ¦‚å¿µä¸é€‚ç”¨åœºæ™¯
â–¡ æŒæ¡8å¤§å¸¸ç”¨èŠ‚ç‚¹çš„åŠŸèƒ½ä¸é…ç½®
â–¡ èƒ½ç‹¬ç«‹è®¾è®¡ç®€å•/ä¸­ç­‰å¤æ‚åº¦å·¥ä½œæµ
â–¡ æŒæ¡è°ƒè¯•æŠ€å·§ä¸æ€§èƒ½ä¼˜åŒ–æ–¹æ³•
â–¡ ç†è§£é«˜çº§ç‰¹æ€§ï¼ˆå¾ªç¯/çŠ¶æ€æœº/å­å·¥ä½œæµï¼‰

ğŸ“Š äº¤ä»˜ç‰©è¦æ±‚ï¼š
â€¢ 1ä¸ªå¯è¿è¡Œçš„"æ ¡å›­å¤©æ°”æ—¥æŠ¥"å·¥ä½œæµï¼ˆJSONå¯¼å‡ºï¼‰
â€¢ 1ä»½"è¯·å‡å®¡æ‰¹"å·¥ä½œæµè®¾è®¡æ–‡æ¡£ï¼ˆå«æµç¨‹å›¾ï¼‰
â€¢ 1é¡µä¸ªäººå¿ƒå¾—ï¼šå·¥ä½œæµç¼–æ’çš„3ä¸ªå…³é”®è®¤çŸ¥
â€¢ ï¼ˆé€‰åšï¼‰"æ´»åŠ¨æŠ¥å"å·¥ä½œæµåŸå‹ + æµ‹è¯•ç”¨ä¾‹

ğŸ å»¶ä¼¸èµ„æºï¼š
â€¢ ã€ŠCozeå·¥ä½œæµå¼€å‘æ‰‹å†Œ.pdfã€‹
â€¢ ã€ŠèŠ‚ç‚¹é…ç½®é€ŸæŸ¥å¡.pngã€‹
â€¢ ã€Šè°ƒè¯•æŠ€å·§ Checklist.mdã€‹
â€¢ ç¤¾åŒºæ¡ˆä¾‹åº“ï¼š#å·¥ä½œæµ æ ‡ç­¾ä¸‹çš„ä¼˜è´¨é¡¹ç›®
```

---

## ğŸ“š é™„å½•ï¼šå·¥ä½œæµå¼€å‘é€ŸæŸ¥æŒ‡å—

### ğŸ”¹ èŠ‚ç‚¹é€‰å‹å†³ç­–æ ‘
```
ç”¨æˆ·é—®é¢˜/éœ€æ±‚
â”‚
â”œâ”€ éœ€è¦è°ƒç”¨å¤–éƒ¨APIï¼Ÿ â†’ âœ… PluginèŠ‚ç‚¹
â”‚
â”œâ”€ éœ€è¦æŸ¥é™æ€çŸ¥è¯†ï¼Ÿ â†’ âœ… KnowledgeèŠ‚ç‚¹  
â”‚
â”œâ”€ éœ€è¦å­˜/æŸ¥ä¸ªäººæ•°æ®ï¼Ÿ â†’ âœ… DatabaseèŠ‚ç‚¹
â”‚
â”œâ”€ éœ€è¦å¤æ‚è®¡ç®—/è§£æï¼Ÿ â†’ âœ… CodeèŠ‚ç‚¹
â”‚
â”œâ”€ éœ€è¦æ¡ä»¶åˆ†æ”¯ï¼Ÿ â†’ âœ… ConditionèŠ‚ç‚¹
â”‚
â”œâ”€ éœ€è¦éå†åˆ—è¡¨ï¼Ÿ â†’ âœ… LoopèŠ‚ç‚¹
â”‚
â”œâ”€ éœ€è¦æš‚å­˜ä¸­é—´ç»“æœï¼Ÿ â†’ âœ… VariableèŠ‚ç‚¹
â”‚
â””â”€ ä»¥ä¸Šéƒ½ä¸éœ€è¦ â†’ è€ƒè™‘ç”¨æç¤ºè¯+æ’ä»¶ï¼Œæ— éœ€å·¥ä½œæµ
```

### ğŸ”¹ å˜é‡å‘½åè§„èŒƒ
```
âœ… æ¨èï¼š
â€¢ è›‡å½¢å‘½åï¼šuser_id, approval_level, total_days
â€¢ è¯­ä¹‰æ¸…æ™°ï¼šworkflow.has_error, plugin.weather.temp
â€¢ ä½œç”¨åŸŸå‰ç¼€ï¼šstart.xxxï¼ˆè¾“å…¥ï¼‰, calc.xxxï¼ˆä»£ç è¾“å‡ºï¼‰

âŒ é¿å…ï¼š
â€¢ æ— æ„ä¹‰ç¼©å†™ï¼ša1, tmp, res
â€¢ ä¸­æ–‡/ç‰¹æ®Šå­—ç¬¦ï¼šç”¨æˆ·ID, temp-value
â€¢ é‡å¤å‘½åï¼šä¸åŒèŠ‚ç‚¹ç”¨ç›¸åŒå˜é‡åå¯¼è‡´è¦†ç›–
```

### ğŸ”¹ é”™è¯¯å¤„ç†æ¨¡æ¿
```python
# CodeèŠ‚ç‚¹é€šç”¨é”™è¯¯å¤„ç†æ¡†æ¶
def main(input1, input2):
    try:
        # ä¸šåŠ¡é€»è¾‘
        result = do_something(input1, input2)
        return {"success": True, "data": result}
    except ValueError as e:
        # ç”¨æˆ·è¾“å…¥é”™è¯¯
        return {"success": False, "error": f"å‚æ•°é”™è¯¯ï¼š{str(e)}", "code": "INVALID_INPUT"}
    except TimeoutError:
        # å¤–éƒ¨æœåŠ¡è¶…æ—¶
        return {"success": False, "error": "æœåŠ¡ç¹å¿™ï¼Œè¯·ç¨åé‡è¯•", "code": "TIMEOUT"}
    except Exception as e:
        # æœªçŸ¥é”™è¯¯
        log(f"Unexpected error: {str(e)}")  # è®°å½•æ—¥å¿—
        return {"success": False, "error": "ç³»ç»Ÿå¼‚å¸¸ï¼Œå·²è®°å½•", "code": "INTERNAL_ERROR"}
```

### ğŸ”¹ æ€§èƒ½ä¼˜åŒ–Checklist
```
â–¡ å¹¶è¡Œæ‰§è¡Œï¼šæ— ä¾èµ–èŠ‚ç‚¹ç”¨å¹¶è¡Œåˆ†æ”¯
â–¡ æ‡’åŠ è½½ï¼šéå¿…éœ€æ•°æ®æŒ‰éœ€æŸ¥è¯¢
â–¡ ç»“æœç¼“å­˜ï¼šCodeèŠ‚ç‚¹ç¼“å­˜é‡å¤è®¡ç®—
â–¡ åˆ†é¡µå¤„ç†ï¼šå¤§æ•°æ®é‡ç”¨åˆ†é¡µ+Loop
â–¡ è¶…æ—¶è®¾ç½®ï¼šæ’ä»¶èŠ‚ç‚¹é…ç½®åˆç†timeout
â–¡ é™çº§ç­–ç•¥ï¼šå…³é”®æ’ä»¶é…ç½®fallbackæ–¹æ¡ˆ
â–¡ æ—¥å¿—ç²¾ç®€ï¼šç”Ÿäº§ç¯å¢ƒå…³é—­debugæ—¥å¿—
```

> ğŸ“ **ç»“è¯­**ï¼šå·¥ä½œæµæ˜¯Cozeå¹³å°çš„"èƒ½åŠ›æ”¾å¤§å™¨"ã€‚æŒæ¡å®ƒï¼Œä½ å°±èƒ½å°†ç®€å•çš„AIå¯¹è¯ï¼Œå‡çº§ä¸ºå¯é çš„ä¸šåŠ¡ç³»ç»Ÿã€‚è®°ä½ï¼šå¥½çš„å·¥ä½œæµè®¾è®¡ = æ¸…æ™°çš„é€»è¾‘ + åˆç†çš„èŠ‚ç‚¹ + å¥å£®çš„å¼‚å¸¸å¤„ç†ã€‚ä»ä¸€ä¸ªå°åœºæ™¯å¼€å§‹ï¼Œé€æ­¥è¿­ä»£ï¼Œä½ ä¹Ÿèƒ½æ„å»ºå‡ºä¸“ä¸šçº§çš„è‡ªåŠ¨åŒ–æµç¨‹ï¼âœ¨
>
---
**å‚è€ƒèµ„æ–™**  
[1] Cozeå®˜æ–¹æ–‡æ¡£ï¼šå·¥ä½œæµæ¦‚å¿µ https://www.coze.cn/docs/workflow  
[2] æœ€ä½³å®è·µï¼šå¹¶è¡Œæ‰§è¡Œä¼˜åŒ– https://www.coze.cn/guide/performance  
[3] è®¾è®¡æ¨¡å¼ï¼šçŠ¶æ€æœºåœ¨å·¥ä½œæµä¸­çš„åº”ç”¨ https://www.coze.cn/cases/state-machine  
[4] å®‰å…¨æŒ‡å—ï¼šå·¥ä½œæµæƒé™ä¸åˆè§„ https://www.coze.cn/guide/security