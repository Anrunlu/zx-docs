---
title: 分糖果
icon: fas fa-candy-cane
author: 李超
order: 3
category:
  - 教学文档
tag:
  - 贪心算法
  - 排序
---

# 分糖果（贪心、排序）

## 1. 题目描述

有 n 个小朋友围坐成一圈。老师给每个小朋友随机发偶数个糖果，然后进行下面的游戏：

每个小朋友都把自己的糖果分一半给左手边的孩子。一轮分糖后，拥有奇数颗糖的孩子由老师补给 1 个糖果，从而变成偶数。反复进行这个游戏，直到所有小朋友的糖果数都相同为止。你的任务是预测在已知的初始糖果情形下，老师一共需要补发多少个糖果。

### 输入描述

程序首先读入一个整数 N (2 < N < 100)，表示小朋友的人数。接着是一行用空格分开的 N 个偶数（每个偶数不大于 1000，不小于 2）。

### 输出描述

要求程序输出一个整数，表示老师需要补发的糖果数。

### 样例

#### 样例输入
3 2 2 4

#### 样例输出
4

## 2. 分析

### 初始化

定义一个常量 N 作为数组的最大长度（N 设置的大小够用就行）。  
`a[N]` 是一个数组，用来存储每个小朋友当前的糖果数。  
`cnt` 是一个计数器，用来记录老师总共补发了多少个糖果。

### 输入处理

通过 `cin >> n;` 读取小朋友的人数 `n`。通过一个循环 `for(int i = 0; i < n; i++) cin >> a[i];` 读取每个小朋友初始的糖果数，并存储在数组 `a` 中。

### 检查所有小朋友糖果数是否相同

定义了一个函数 `cmp(int a[], int n)`，它通过比较数组 `a` 中连续的元素来判断所有小朋友的糖果数是否相同。如果所有元素都相同，返回 `true`；否则返回 `false`。

### 分糖果和补糖果的循环

使用 `while (!cmp(a, n))` 循环，直到所有小朋友的糖果数都相同。在循环内部，首先将每个小朋友的糖果数除以 2，模拟分糖果的过程。然后，通过一个循环 `for(int i = 0; i < n; i++)` 模拟将糖果分给左手边的小朋友。这里使用了一个变量 `c` 来存储第一个小朋友的糖果数，以便在循环结束时将糖果分给第一个小朋友。

接着，再次遍历数组 `a`，检查每个小朋友的糖果数是否为奇数。如果是奇数，就补发一个糖果，并增加 `cnt` 的值。

### 输出结果

最后，输出 `cnt` 的值，即老师总共补发的糖果数。

## 3. 代码

```cpp
#include <iostream>
using namespace std;

const int N = 110;
int a[N], cnt = 0;

bool cmp(int a[], int n) {
    for(int i = 0; i < n - 1; i++) {
        if(a[i] != a[i + 1]) return false;
    }
    return true;
}

int main() {
    int n;
    cin >> n;
    for(int i = 0; i < n; i++) cin >> a[i];
    while (!cmp(a, n)) {
        for(int i = 0; i < n; i++) a[i] /= 2;
        int c = a[0];
        for(int i = 0; i < n; i++) {
            if(i < n - 1) a[i] += a[i + 1];
            else a[i] += c;
        }
        for(int i = 0; i < n; i++) {
            if(a[i] % 2) {
                a[i] += 1;
                cnt++;
            }
        }
    }
    cout << cnt;
    return 0;
}
```
## 4. 运行结果
在这个代码运行完成后，运行结果如下：
![图 0](https://oss.docs.z-xin.net/b37ab340880b04a7857f8f68c36659019d84a4b1d88b030abf0b3871659962ae.png)  
